import{r,j as e,L as N}from"./react-DDc6AVgH.js";import{C as j,w as g}from"./index-Bolh4PDg.js";import{g as C,t as w}from"./firebase-BcXptfJc.js";import"./vendor-38BQLZWb.js";function V({user:t,setUser:c}){const x=C();console.log(t);const[o,h]=r.useState(""),[a,d]=r.useState(0),[i,b]=r.useState(""),[s,m]=r.useState(0),[n,u]=r.useState(0);r.useEffect(()=>{if(a>0||n>0||s>0){const l=setTimeout(()=>{a>0&&d(a-1),n>0&&u(n-1),s>0&&m(s-1)},1e3);return()=>clearTimeout(l)}},[n,a,s,t]);const f=async()=>{console.log("Change username to:",o),await g("users",{displayName:o},t.uid,!0),c({...t,displayName:o}),d(5)};function p(){w(x.currentUser).then(()=>{console.log("email sent"),u(60)})}const y=async()=>{console.log("Change link to:",i),await g("users",{link:i},t.uid,!0),c({...t,link:i}),m(5)};return e.jsxs(j,{className:"flex-col mx-auto p-6 text-center bg-gray-800",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Profile"}),e.jsx("img",{src:t.photoURL,onError:({currentTarget:l})=>{l.onerror=null,l.src="https://placehold.co/32x32"},alt:"avatar",className:"w-16 h-16 rounded-full mx-auto mb-3"}),e.jsxs("p",{className:"text-lg font-medium",children:[t.displayName," (",t.emailVerified?"verified":"unverified",")"]}),e.jsx("p",{className:"text-gray-400 mb-3",children:t.email}),e.jsxs("p",{className:"text-gray-400 mb-4",children:["Credits: "," "+t.credits]}),t.emailVerified&&e.jsxs("div",{className:"py-4",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Verify Email"}),e.jsx("button",{onClick:p,disabled:n>0,className:` px-4 py-2 rounded-lg font-medium transition ${n>0?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:n>0?n+"s":"Send Verification Email"})]}),e.jsxs("div",{className:"py-4",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Change Username"}),e.jsxs("div",{className:"flex flex-wrap items-center justify-evenly gap-2",children:[e.jsx("input",{type:"text",value:o,onChange:l=>h(l.target.value),placeholder:"Enter new username",className:" px-3 py-2 bg-gray-900 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{onClick:f,disabled:a>0||!o.trim(),className:` px-4 py-2 rounded-lg font-medium transition ${a>0||!o.trim()?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:a>0?a+"s":"Change"})]})]}),e.jsxs("div",{className:"py-4",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Change Link"}),e.jsxs("div",{className:"flex flex-wrap items-center justify-evenly gap-2",children:[e.jsx("input",{type:"text",value:i,onChange:l=>b(l.target.value),placeholder:"Enter new link",className:" px-3 py-2 bg-gray-900 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{onClick:y,disabled:s>0||!i.trim(),className:` px-4 py-2 rounded-lg font-medium transition ${s>0||!i.trim()?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:s>0?s+"s":"Change"})]})]}),e.jsx(N,{to:"/",className:"text-blue-500 mt-4",children:"Back to Dashboard"})]})}export{V as default};
