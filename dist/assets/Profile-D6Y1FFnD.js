import{r as i,j as e,L as N}from"./react-DDc6AVgH.js";import{u as j,C,w as g}from"./index-BnUmwe8j.js";import{g as w,t as v}from"./firebase-BcXptfJc.js";import"./vendor-38BQLZWb.js";function S(){const{user:s,setUser:c}=j(),x=w();console.log(s);const[o,h]=i.useState(""),[t,d]=i.useState(0),[r,b]=i.useState(""),[a,m]=i.useState(0),[n,u]=i.useState(0);i.useEffect(()=>{if(t>0||n>0||a>0){const l=setTimeout(()=>{t>0&&d(t-1),n>0&&u(n-1),a>0&&m(a-1)},1e3);return()=>clearTimeout(l)}},[n,t,a]);const f=async()=>{console.log("Change username to:",o),await g("users",{displayName:o},s.uid,!0),c({...s,displayName:o}),d(5)};function p(){v(x.currentUser).then(()=>{console.log("email sent"),u(60)})}const y=async()=>{console.log("Change link to:",r),await g("users",{link:r},s.uid,!0),c({...s,link:r}),m(5)};return e.jsxs(C,{className:"flex-col mx-auto p-6 text-center bg-gray-800",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Profile"}),e.jsx("img",{src:s.photoURL,onError:({currentTarget:l})=>{l.onerror=null,l.src="https://placehold.co/32x32"},alt:"avatar",className:"w-16 h-16 rounded-full mx-auto mb-3"}),e.jsxs("p",{className:"text-lg font-medium",children:[s.displayName," (",s.emailVerified?"verified":"unverified",")"]}),e.jsx("p",{className:"text-gray-400 mb-3",children:s.email}),e.jsxs("p",{className:"text-gray-400 mb-4",children:["Credits: "," "+s.credits]}),s.emailVerified&&e.jsxs("div",{className:"py-4",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Verify Email"}),e.jsx("button",{onClick:p,disabled:n>0,className:` px-4 py-2 rounded-lg font-medium transition ${n>0?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:n>0?n+"s":"Send Verification Email"})]}),e.jsxs("div",{className:"py-4",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Change Username"}),e.jsxs("div",{className:"flex flex-wrap items-center justify-evenly gap-2",children:[e.jsx("input",{type:"text",value:o,onChange:l=>h(l.target.value),placeholder:"Enter new username",className:" px-3 py-2 bg-gray-900 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{onClick:f,disabled:t>0||!o.trim(),className:` px-4 py-2 rounded-lg font-medium transition ${t>0||!o.trim()?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:t>0?t+"s":"Change"})]})]}),e.jsxs("div",{className:"py-4",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Change Link"}),e.jsxs("div",{className:"flex flex-wrap items-center justify-evenly gap-2",children:[e.jsx("input",{type:"text",value:r,onChange:l=>b(l.target.value),placeholder:"Enter new link",className:" px-3 py-2 bg-gray-900 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{onClick:y,disabled:a>0||!r.trim(),className:` px-4 py-2 rounded-lg font-medium transition ${a>0||!r.trim()?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:a>0?a+"s":"Change"})]})]}),e.jsx(N,{to:"/",className:"text-blue-500 mt-4",children:"Back to Dashboard"})]})}export{S as default};
