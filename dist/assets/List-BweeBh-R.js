import{r as o,j as s,X as j,u as f}from"./react-CGOmruj2.js";import{u as b,C as v,d as N}from"./index-aDfJD7Cu.js";import{d as w,c as C}from"./firebase-BcXptfJc.js";import"./vendor-38BQLZWb.js";function k({cat:d,name:p,onRemoveItem:m,onUpdateItem:x}){const[a,g]=o.useState(d),h=(e,r)=>{const i={...a,[e]:{...a[e],type:r}};g(i),x?.(d,i)},n=(e,r)=>{const i={...a,[e]:{...a[e],value:Number(r)}};g(i),x?.(e,i[e])},y=e=>{const r={...a};delete r[e],g(r),m?.(e.id)};return s.jsxs("div",{className:"relative border border-gray-700 rounded-lg p-4 shadow hover:shadow-lg transition duration-200 bg-gray-800 text-gray-100",children:[s.jsx("h2",{className:"text-xl font-bold mb-3",children:p}),s.jsx("div",{className:"space-y-3",children:Object.keys(a).map(e=>s.jsxs("div",{className:"flex items-center justify-between bg-gray-900/50 px-3 py-2 rounded-lg border border-gray-700 text-sm",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("img",{src:`https://www.torn.com/images/items/${e}/small.png`,className:"h-6",alt:a[e].name}),s.jsx("span",{children:a[e].name})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("select",{value:a[e].type||"",onChange:r=>h(e,r.target.value),className:"bg-gray-800 border border-gray-600 rounded-md px-2 py-1 text-gray-200 text-sm focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Type"}),s.jsx("option",{value:"definitive",title:"Set Price",children:"Definitive"}),s.jsx("option",{value:"sell",title:"Multiplier",children:"Multiplier"})]}),s.jsx("input",{type:"number",value:a[e].value||"",onChange:r=>n(e,r.target.value),className:"w-20 bg-gray-800 border border-gray-600 rounded-md px-2 py-1 text-gray-200 text-sm focus:ring-2 focus:ring-blue-500",placeholder:"Value"})]}),s.jsx("button",{onClick:()=>y(e),className:"text-red-400 hover:text-red-500 transition",title:"Remove item",children:s.jsx(j,{size:16})})]},e))})]})}function T(d){const{user:p}=b(),{items:m,categories:x}=o.useMemo(()=>{let l=[],c={};return d.items.items.map(t=>{c[t.id]=t,l.includes(t.type)||l.push(t.type)}),{items:c,categories:l}},[d.items]),a=f(),[g,h]=o.useState(!0),[n,y]=o.useState({}),[e,r]=o.useState({});async function i(){const l=w(N,"users",p.uid),c=await C(l);if(c.exists()){const t=c.data();(t.credits=0)?a("/man-dont-pay"):(y({owner:t.displayName,list:t.list,order:t.order,scheme:t.scheme}),h(!1))}else a("/")}return o.useEffect(()=>{Object.keys(n).length===0?i():(r({}),(n.order||x).map(l=>{let c=Object.entries(n.list).filter(u=>m[u[0]].type===l),t={};c.forEach(u=>t[u[0]]={...u[1],...m[u[0]]}),Object.keys(t).length>0&&r({...e,[l]:t})}))},[n]),n?s.jsxs("div",{className:"p-6 max-w-5xl mx-auto bg-gray-900 min-h-screen text-gray-100",children:[s.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Your Price List"}),s.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:Object.keys(e).length>0?Object.keys(e).map(l=>s.jsx(k,{name:l,cat:e[l]},l)):s.jsxs("div",{className:"col-span-full text-center py-12 text-gray-400",children:[s.jsx("p",{className:"text-lg",children:"No items to show."}),s.jsx("p",{className:"text-sm text-gray-500",children:"Try changing your filters or asking this seller to add more items."})]})})]}):s.jsx(v,{children:s.jsx("h1",{children:"loading prices"})})}export{T as default};
