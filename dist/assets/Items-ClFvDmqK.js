import{r as i,j as e}from"./react-DDc6AVgH.js";import{w as N}from"./index-BnUmwe8j.js";import"./vendor-38BQLZWb.js";import"./firebase-BcXptfJc.js";function C({currentPage:r,totalPages:a,onPageChange:d,maxVisible:c=9}){if(a<=1)return null;i.useEffect(()=>{const t=x=>{x.key==="ArrowLeft"&&r>1?d(r-1):x.key==="ArrowRight"&&r<a&&d(r+1)};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[r,a,d]);const n=t=>{t<1||t>a||d(t)},l=[],p=Math.floor(c/2);let o=Math.max(1,r-p),u=Math.min(a,r+p);r<=p?u=Math.min(a,c):r+p>=a&&(o=Math.max(1,a-c+1)),o>1&&(l.push(1),o>2&&l.push("..."));for(let t=o;t<=u;t++)l.push(t);return u<a&&(u<a-1&&l.push("..."),l.push(a)),e.jsxs("div",{className:"flex flex-wrap justify-center mt-6 gap-2",role:"navigation","aria-label":"Pagination Navigation",children:[e.jsx("button",{onClick:()=>n(r-1),disabled:r===1,"aria-label":"Previous Page",className:`px-3 py-1 rounded border border-gray-700 transition ${r===1?"bg-gray-700 text-gray-400 cursor-not-allowed":"bg-gray-800 hover:bg-gray-700 text-gray-100"}`,children:"Prev"}),l.map((t,x)=>t==="..."?e.jsx("span",{className:"px-2 py-1 text-gray-500 select-none",children:"..."},`ellipsis-${x}`):e.jsx("button",{onClick:()=>n(t),"aria-label":`Go to page ${t}`,className:`px-3 py-1 rounded border border-gray-700 transition ${r===t?"bg-blue-600 text-white font-semibold":"bg-gray-800 hover:bg-gray-700 text-gray-100"}`,children:t},t)),e.jsx("button",{onClick:()=>n(r+1),disabled:r===a,"aria-label":"Next Page",className:`px-3 py-1 rounded border border-gray-700 transition ${r===a?"bg-gray-700 text-gray-400 cursor-not-allowed":"bg-gray-800 hover:bg-gray-700 text-gray-100"}`,children:"Next"})]})}function k({item:r,user:a,setUser:d}){const c=async n=>{console.log("handling add for",n.name),await N("users",{list:{...a.list,[n.id]:{name:n.name,rate:"comparative",val:1}}},a.uid,!0),d({...a,list:{...a.list,[n.id]:{name:n.name,rate:"comparative",val:1}}})};return e.jsxs("div",{className:"relative border border-gray-700 rounded-lg p-4 shadow hover:shadow-lg transition duration-200 bg-gray-800 text-gray-100",children:[a&&e.jsx("button",{onClick:()=>c(r),className:"cursor-pointer absolute top-2 right-2 bg-blue-600 hover:bg-blue-700 text-white rounded-full w-8 h-8 flex items-center justify-center",children:"+"}),e.jsx("h2",{className:"text-xl font-bold mb-2",children:r.name}),e.jsx("p",{className:"text-gray-400 mb-2",children:r.type}),e.jsx("p",{className:"mb-2",children:r.description}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-300",children:[e.jsxs("span",{children:["Buy: $",r.buy_price]}),e.jsxs("span",{children:["Sell: $",r.sell_price]}),e.jsxs("span",{children:["Market: $",r.market_price]})]}),e.jsxs("p",{className:"text-gray-500 text-sm mt-2",children:["Circulation: ",r.circulation.toLocaleString()]})]})}function S(){return e.jsxs("div",{className:"border border-gray-700 rounded-lg p-4 shadow animate-pulse space-y-2 bg-gray-800",children:[e.jsx("div",{className:"h-6 bg-gray-600 rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-gray-600 rounded w-1/4"}),e.jsx("div",{className:"h-3 bg-gray-600 rounded w-full"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"h-3 bg-gray-600 rounded w-1/5"}),e.jsx("div",{className:"h-3 bg-gray-600 rounded w-1/5"}),e.jsx("div",{className:"h-3 bg-gray-600 rounded w-1/5"})]}),e.jsx("div",{className:"h-3 bg-gray-600 rounded w-1/3 mt-2"})]})}function E({items:r,user:a,setUser:d}){const[c,n]=i.useState([]),[l,p]=i.useState(""),[o,u]=i.useState(""),[t,x]=i.useState(1),[y,j]=i.useState(10);i.useEffect(()=>{if(r?.items?.length){const s=[...new Set(r.items.map(h=>h.type))];n(s)}},[r]);const g=i.useMemo(()=>{if(!r?.items)return[];let s=r.items;return l&&(s=s.filter(h=>h.type.toLowerCase()===l.toLowerCase())),o&&(s=s.filter(h=>h.name.toLowerCase().includes(o.toLowerCase()))),s},[r,l,o]);i.useEffect(()=>{x(1)},[l,o]);const m=Math.ceil(g.length/y),b=t*y,v=b-y,f=g.slice(v,b),w=s=>{s<1||s>m||x(s)};return e.jsxs("div",{className:"p-6 max-w-5xl mx-auto bg-gray-900 min-h-screen text-gray-100",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Items"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsx("input",{type:"text",placeholder:"Search by name",disabled:!r,value:o,onChange:s=>u(s.target.value),className:`border border-gray-700 rounded px-3 py-2 w-full sm:w-1/2 bg-gray-800 text-gray-100 placeholder-gray-400 transition ${r?"":"opacity-50 cursor-not-allowed"}`}),e.jsxs("select",{value:l,disabled:!r,onChange:s=>p(s.target.value),className:`border border-gray-700 rounded px-3 py-2 w-full sm:w-1/2 bg-gray-800 text-gray-100 transition ${r?"":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:"All Types"}),c.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsxs("select",{title:"Items per page",value:y,onChange:s=>j(Number(s.target.value)),className:"border border-gray-700 rounded px-3 py-2 w-full sm:w-1/4 bg-gray-800 text-gray-100",children:[e.jsx("option",{value:5,children:"5pp"}),e.jsx("option",{value:10,children:"10pp"}),e.jsx("option",{value:25,children:"25pp"}),e.jsx("option",{value:50,children:"50pp"})]})]}),e.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:r?f.length>0?f.map(s=>e.jsx(k,{item:s,user:a,setUser:d},s.id)):e.jsxs("div",{className:"col-span-full text-center py-12 text-gray-400",children:[e.jsx("p",{className:"text-lg",children:"No items found."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Try changing your filters or search query."})]}):Array.from({length:4}).map((s,h)=>e.jsx(S,{},h))}),r&&g.length>y&&e.jsx(C,{currentPage:t,totalPages:m,onPageChange:w,maxVisible:9})]})}export{E as default};
