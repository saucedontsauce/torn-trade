const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-CIg1A0J6.js","assets/react-DDc6AVgH.js","assets/vendor-38BQLZWb.js","assets/firebase-BcXptfJc.js","assets/About-C-dPLOG0.js","assets/index-f8rydId6.js","assets/Items-ClFvDmqK.js","assets/Profile-D6Y1FFnD.js","assets/List-Df0W5LnW.js"])))=>i.map(i=>d[i]);
import{r as c,u as U,j as e,L as N,N as b,F as S,a as C,X as T,M as F,R as V,b as m,c as j,O as B,d as D,e as M,B as q}from"./react-DDc6AVgH.js";import{i as H,g as G,a as K,b as Q,d as E,s as J,c as I,e as w,f as v,h as g,j as A,q as W,o as X,k as Y,l as Z}from"./firebase-BcXptfJc.js";import"./vendor-38BQLZWb.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function i(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(a){if(a.ep)return;a.ep=!0;const n=i(a);fetch(a.href,n)}})();const ee="modulepreload",te=function(t){return"/torn-trade/"+t},P={},f=function(s,i,l){let a=Promise.resolve();if(i&&i.length>0){let x=function(o){return Promise.all(o.map(u=>Promise.resolve(u).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),d=r?.nonce||r?.getAttribute("nonce");a=x(i.map(o=>{if(o=te(o),o in P)return;P[o]=!0;const u=o.endsWith(".css"),y=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${y}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":ee,u||(h.as="script"),h.crossOrigin="",h.href=o,d&&h.setAttribute("nonce",d),document.head.appendChild(h),u)return new Promise((z,$)=>{h.addEventListener("load",z),h.addEventListener("error",()=>$(new Error(`Unable to preload CSS for ${o}`)))})}))}function n(r){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=r,window.dispatchEvent(d),!d.defaultPrevented)throw r}return a.then(r=>{for(const d of r||[])d.status==="rejected"&&n(d.reason);return s().catch(n)})},O=c.createContext({}),se=()=>c.useContext(O);function ae(t){const s="https://torn-trade-nnmnn.vercel.app/api/sheet.js",i=()=>fetch(s).then(a=>a.json()).then(t).catch(console.error);i();const l=setInterval(i,9e5);return()=>clearInterval(l)}const re={apiKey:"AIzaSyCifPSCAi3xjzRJVK7mNpctuqjgj3Q1DzQ",authDomain:"torn-trading.firebaseapp.com",projectId:"torn-trading",storageBucket:"torn-trading.firebasestorage.app",messagingSenderId:"455485576469",appId:"1:455485576469:web:fd6a93ac1085a91b33051c",measurementId:"G-G6GV97H932"},L=H(re),_=G(L),p=K(L);Q(L);async function R(t,s,i,l){const a=E(p,t,i);await J(a,s,l&&{merge:!0})}async function k(t,s){const i=E(p,t,s);try{const l=await I(i);if(l.exists())return console.log("data",l.data()),l.data();console.log("Document does not exist")}catch(l){console.log(l)}}async function ne(t,s){console.log("init user data called");const i=E(p,"users",t.uid);if((await I(i)).exists()){await R("users",{uid:t.uid,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,lastLogin:g()},t.uid,!0);const a=await k("users",t.uid);s(a)}else{await R("users",{displayName:t.displayName||"Anonymous",email:t.email,credits:0,photoURL:t.photoURL||"",createdAt:g(),lastLogin:g()},t.uid);const a=await k("users",t.uid);s(a),await w(v(p,"messages"),{text:"ðŸ‘‹ a new member joined the chat!",uid:"System",displayName:"System",photoURL:"",lastLogin:g(),createdAt:g()}),await w(v(p,"lists"),{text:`ðŸ‘‹ Hi and welcome to ${t.displayName||"User"}'s price sheet!`,uid:"System",displayName:"System",visible:!1,order:[],prices:{},photoURL:"",createdAt:g()})}}function oe(){return e.jsxs("footer",{className:"py-4 text-center text-sm text-gray-500 border-t border-gray-700",children:["Â© ",new Date().getFullYear(),"  some text or something, maybe links"]})}function ie(){const t=U(),{user:s,auth:i}=se(),[l,a]=c.useState(!1),[n,r]=c.useState(!1),d=[{name:"Home",path:"/"},{name:"About",path:"/about"}],x=[{name:"Items",path:"/items"},{name:"List",path:"/user/list"}];return e.jsx("nav",{className:"bg-gray-800 shadow-lg sticky top-0 z-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex justify-between h-16 items-center",children:[e.jsx(N,{to:"/",className:"text-2xl font-bold text-blue-400",children:"Torn-Trade"}),e.jsxs("div",{className:"hidden md:flex space-x-6",children:[!s&&d.map(o=>e.jsx(b,{to:o.path,className:({isActive:u})=>`text-gray-300 flex items-center hover:text-blue-400 ${u?"text-blue-400 font-semibold":""}`,children:o.name},o.path)),s&&x.map(o=>e.jsx(b,{to:o.path,onClick:()=>a(!1),className:({isActive:u})=>`text-gray-300 flex items-center hover:text-blue-400 ${u?"text-blue-400 font-semibold":""}`,children:o.name},o.path)),e.jsx("div",{className:"flex items-center pr-2",children:s?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>r(!n),className:"flex items-center space-x-1 text-white hover:text-yellow-300 transition duration-300 ease-in-out","aria-haspopup":"true","aria-expanded":n,children:[e.jsx(S,{}),e.jsx("span",{children:s.displayName||"Account"}),e.jsx(C,{})]}),n&&e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10",children:[e.jsx(N,{onClick:()=>r(!1),to:"/user",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left ",children:"Profile"}),e.jsx("button",{onClick:()=>A(i),className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left",children:"Logout"})]})]})}):e.jsx(e.Fragment,{children:e.jsx("button",{onClick:()=>{t("/login")},className:"bg-white cursor-pointer text-blue-500 px-4 py-2 rounded-full hover:bg-yellow-300 hover:text-blue-700 transition duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-yellow-300",children:"Sign In"})})})]}),e.jsxs("div",{className:"md:hidden flex",children:[e.jsx("div",{className:"flex items-center pr-4",children:s?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>r(!n),className:"flex items-center space-x-1 text-white hover:text-yellow-300 transition duration-300 ease-in-out","aria-haspopup":"true","aria-expanded":n,children:[e.jsx(S,{}),e.jsx("span",{children:s.displayName||"Account"}),e.jsx(C,{})]}),n&&e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10",children:[e.jsx(N,{onClick:()=>r(!1),to:"/user",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left ",children:"Profile"}),e.jsx("button",{onClick:()=>A(i),className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left",children:"Logout"})]})]})}):e.jsx(e.Fragment,{children:e.jsx("button",{onClick:()=>{t("/login")},className:"bg-white cursor-pointer text-blue-500 px-4 py-2 rounded-full hover:bg-yellow-300 hover:text-blue-700 transition duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-yellow-300",children:"Sign In"})})}),e.jsx("button",{className:" cursor-pointer text-gray-300 hover:text-white",onClick:()=>a(!l),children:l?e.jsx(T,{size:24}):e.jsx(F,{size:24})})]})]}),l&&e.jsxs("div",{className:"md:hidden pb-3 space-y-2",children:[d.map(o=>e.jsx(b,{to:o.path,onClick:()=>a(!1),className:({isActive:u})=>`block px-3 py-2 rounded-md ${u?"bg-blue-500 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"}`,children:o.name},o.path)),s&&x.map(o=>e.jsx(b,{to:o.path,onClick:()=>a(!1),className:({isActive:u})=>`block px-3 py-2 rounded-md ${u?"bg-blue-500 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"}`,children:o.name},o.path))]})]})})}function le({children:t,className:s=""}){return e.jsx("div",{className:` shadow rounded-2xl ${s}`,children:t})}function ce({children:t,className:s=""}){return e.jsx("div",{className:`border-b p-3 font-semibold ${s}`,children:t})}function de({children:t,className:s=""}){return e.jsx("div",{className:`p-3 ${s}`,children:t})}function ue({children:t,onClick:s,type:i="button",className:l="",variant:a="default",disabled:n}){const r="rounded-lg px-4 py-2 font-medium transition-all",d=a==="outline"?"border border-gray-300 text-gray-700 hover:bg-gray-100":"bg-blue-600 text-white hover:bg-blue-700";return e.jsx("button",{type:i,onClick:s,disabled:n,className:`${r} ${d} ${l}`,children:t})}function me({value:t,onChange:s,placeholder:i,type:l="text",className:a="",...n}){return e.jsx("input",{type:l,value:t,onChange:s,placeholder:i,className:`w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 outline-none ${a}`,...n})}function xe(){const t=_.currentUser,[s,i]=c.useState([]),[l,a]=c.useState("");c.useEffect(()=>{const r=W(v(p,"messages"),X("createdAt","asc"));return Y(r,x=>{i(x.docs.map(o=>({id:o.id,...o.data()})))})},[]);const n=async r=>{r.preventDefault(),l.trim()&&(await w(v(p,"messages"),{text:l,uid:t.uid,photoURL:t.photoURL,displayName:t.displayName,createdAt:g()}),a(""))};return e.jsxs(le,{className:"p-4 h-full flex flex-col",children:[e.jsx(ce,{className:"font-semibold text-lg",children:"Chat Room"}),e.jsx(de,{className:"flex-1 overflow-y-auto space-y-2",children:s.map(r=>e.jsx("div",{className:`flex ${r.uid===t.uid?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`p-2 rounded-lg ${r.uid===t.uid?"bg-blue-500 text-white":"bg-gray-200"}`,children:[r.uid!==t.uid&&e.jsx("p",{className:"text-sm bold",children:r.displayName}),e.jsx("p",{className:"text-sm",children:r.text})]})},r.id))}),e.jsxs("form",{onSubmit:n,className:"flex gap-2 mt-2",children:[e.jsx(me,{value:l,onChange:r=>a(r.target.value),placeholder:"Type message..."}),e.jsx(ue,{type:"submit",children:"Send"})]})]})}const he=c.lazy(()=>f(()=>import("./Home-CIg1A0J6.js").then(t=>t.a),__vite__mapDeps([0,1,2,3]))),pe=c.lazy(()=>f(()=>import("./About-C-dPLOG0.js"),__vite__mapDeps([4,1,2]))),ge=c.lazy(()=>f(()=>import("./index-f8rydId6.js"),__vite__mapDeps([5,1,2,3,4,0])).then(t=>({default:t.Login}))),fe=c.lazy(()=>f(()=>import("./index-f8rydId6.js"),__vite__mapDeps([5,1,2,3,4,0])).then(t=>({default:t.Register}))),ye=c.lazy(()=>f(()=>import("./Items-ClFvDmqK.js"),__vite__mapDeps([6,1,2,3]))),be=c.lazy(()=>f(()=>import("./Profile-D6Y1FFnD.js"),__vite__mapDeps([7,1,2,3]))),je=c.lazy(()=>f(()=>import("./List-Df0W5LnW.js"),__vite__mapDeps([8,1,2])));function ve(){const[t,s]=c.useState(null),[i,l]=c.useState(!0),[a,n]=c.useState();return c.useEffect(()=>{const r=Z(_,async x=>{console.log("Auth status changed"),x?await ne(x,s):s(),l(!1)}),d=ae(n);return()=>{r(),d()}},[]),i||!a?e.jsx("div",{className:"h-screen bg-gray-900 text-gray-100 flex items-center justify-center",children:"Loading..."}):e.jsx(c.Suspense,{fallback:e.jsx("div",{className:"h-screen bg-gray-900 text-gray-100 flex items-center justify-center",children:"Loading..."}),children:e.jsx(O.Provider,{value:{db:p,auth:_,user:t,items:a,setUser:s},children:e.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-100 flex flex-col",children:[e.jsx(ie,{}),e.jsx("main",{className:"flex-grow container mx-auto p-6",children:e.jsxs(V,{children:[e.jsxs(m,{path:"/",children:[e.jsx(m,{index:!0,element:e.jsx(he,{items:a})}),e.jsx(m,{path:"about",element:e.jsx(pe,{})}),e.jsx(m,{path:"login",element:t?e.jsx(j,{to:"/"}):e.jsx(ge,{})}),e.jsx(m,{path:"register",element:t?e.jsx(j,{to:"/"}):e.jsx(fe,{})}),e.jsx(m,{path:"chat",element:t?e.jsx(xe,{}):e.jsx(j,{to:"/"})}),e.jsx(m,{path:"items",element:e.jsx(ye,{items:a,user:t,setUser:s})})]}),e.jsxs(m,{path:"/user",element:t?e.jsx(B,{}):e.jsx(j,{to:"/"}),children:[e.jsx(m,{index:!0,element:e.jsx(be,{})}),e.jsx(m,{path:"list",element:e.jsx(je,{itemsProp:a,user:t})})]})]})}),e.jsx(oe,{})]})})})}class Ne extends D.Component{constructor(s){super(s),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,i){console.error("Error caught by ErrorBoundary:",s,i),this.setState({errorInfo:i})}handleReload=()=>{window.location.reload()};render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 text-gray-800 p-6",children:e.jsxs("div",{className:"max-w-md w-full text-center bg-white rounded-2xl shadow-lg p-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"An unexpected error occurred. Try refreshing the page or come back later."}),!1,e.jsx("button",{onClick:this.handleReload,className:"mt-2 px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition",children:"Reload Page"})]})}):this.props.children}}M.createRoot(document.getElementById("root")).render(e.jsx(D.StrictMode,{children:e.jsx(Ne,{children:e.jsx(q,{basename:"/torn-trade/",children:e.jsx(ve,{})})})}));export{ue as B,le as C,me as I,_ as a,p as d,ne as i,se as u,R as w};
