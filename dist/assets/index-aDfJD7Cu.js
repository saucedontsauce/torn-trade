const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-HxPtw7fy.js","assets/react-CGOmruj2.js","assets/vendor-38BQLZWb.js","assets/firebase-BcXptfJc.js","assets/About-BhKB8ggo.js","assets/index-DM8LFY-t.js","assets/Profile-rV3KCjUJ.js","assets/List-BweeBh-R.js","assets/Items-EC5_XMgO.js"])))=>i.map(i=>d[i]);
import{r as c,u as U,j as e,L as N,N as b,F as S,a as A,X as F,M as V,R as M,b as x,c as j,O as C,d as P,e as B,B as q}from"./react-CGOmruj2.js";import{i as H,g as G,a as K,b as Q,d as E,s as J,c as O,e as w,f as v,h as g,j as R,q as W,o as X,k as Y,l as Z}from"./firebase-BcXptfJc.js";import"./vendor-38BQLZWb.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function i(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(s){if(s.ep)return;s.ep=!0;const n=i(s);fetch(s.href,n)}})();const ee="modulepreload",te=function(t){return"/torn-trade/"+t},D={},f=function(r,i,l){let s=Promise.resolve();if(i&&i.length>0){let m=function(o){return Promise.all(o.map(u=>Promise.resolve(u).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),d=a?.nonce||a?.getAttribute("nonce");s=m(i.map(o=>{if(o=te(o),o in D)return;D[o]=!0;const u=o.endsWith(".css"),y=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${y}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":ee,u||(h.as="script"),h.crossOrigin="",h.href=o,d&&h.setAttribute("nonce",d),document.head.appendChild(h),u)return new Promise(($,T)=>{h.addEventListener("load",$),h.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${o}`)))})}))}function n(a){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=a,window.dispatchEvent(d),!d.defaultPrevented)throw a}return s.then(a=>{for(const d of a||[])d.status==="rejected"&&n(d.reason);return r().catch(n)})},z=c.createContext({}),se=()=>c.useContext(z);function re(t){const r="https://torn-trade-nnmnn.vercel.app/api/sheet.js",i=()=>fetch(r).then(s=>s.json()).then(t).catch(console.error);i();const l=setInterval(i,9e5);return()=>clearInterval(l)}const ae={apiKey:"AIzaSyCifPSCAi3xjzRJVK7mNpctuqjgj3Q1DzQ",authDomain:"torn-trading.firebaseapp.com",projectId:"torn-trading",storageBucket:"torn-trading.firebasestorage.app",messagingSenderId:"455485576469",appId:"1:455485576469:web:fd6a93ac1085a91b33051c",measurementId:"G-G6GV97H932"},L=H(ae),_=G(L),p=K(L);Q(L);async function k(t,r,i,l){const s=E(p,t,i);await J(s,r,l&&{merge:!0})}async function I(t,r){const i=E(p,t,r);try{const l=await O(i);if(l.exists())return console.log("data",l.data()),l.data();console.log("Document does not exist")}catch(l){console.log(l)}}async function ne(t,r){console.log("init user data called");const i=E(p,"users",t.uid);if((await O(i)).exists()){await k("users",{uid:t.uid,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,lastLogin:g()},t.uid,!0);const s=await I("users",t.uid);r(s)}else{await k("users",{displayName:t.displayName||"Anonymous",email:t.email,credits:0,photoURL:t.photoURL||"",createdAt:g(),lastLogin:g()},t.uid);const s=await I("users",t.uid);r(s),await w(v(p,"messages"),{text:"ðŸ‘‹ a new member joined the chat!",uid:"System",displayName:"System",photoURL:"",lastLogin:g(),createdAt:g()}),await w(v(p,"lists"),{text:`ðŸ‘‹ Hi and welcome to ${t.displayName||"User"}'s price sheet!`,uid:"System",displayName:"System",visible:!1,order:[],prices:{},photoURL:"",createdAt:g()})}}function oe(){return e.jsxs("footer",{className:"py-4 text-center text-sm text-gray-500 border-t border-gray-700",children:["Â© ",new Date().getFullYear(),"  some text or something, maybe links"]})}function ie(){const t=U(),{user:r,auth:i}=se(),[l,s]=c.useState(!1),[n,a]=c.useState(!1),d=[{name:"Home",path:"/"},{name:"About",path:"/about"}],m=[{name:"Items",path:"/info"},{name:"List",path:"/user/list"}];return e.jsx("nav",{className:"bg-gray-800 shadow-lg sticky top-0 z-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex justify-between h-16 items-center",children:[e.jsx(N,{to:"/",className:"text-2xl font-bold text-blue-400",children:"Torn-Trade"}),e.jsxs("div",{className:"hidden md:flex space-x-6",children:[d.map(o=>e.jsx(b,{to:o.path,className:({isActive:u})=>`text-gray-300 flex items-center hover:text-blue-400 ${u?"text-blue-400 font-semibold":""}`,children:o.name},o.path)),r&&m.map(o=>e.jsx(b,{to:o.path,onClick:()=>s(!1),className:({isActive:u})=>`text-gray-300 flex items-center hover:text-blue-400 ${u?"text-blue-400 font-semibold":""}`,children:o.name},o.path)),e.jsx("div",{className:"flex items-center pr-2",children:r?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>a(!n),className:"flex items-center space-x-1 text-white hover:text-yellow-300 transition duration-300 ease-in-out","aria-haspopup":"true","aria-expanded":n,children:[e.jsx(S,{}),e.jsx("span",{children:r.displayName||"Account"}),e.jsx(A,{})]}),n&&e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10",children:[e.jsx(N,{onClick:()=>a(!1),to:"/user",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left ",children:"Profile"}),e.jsx("button",{onClick:()=>R(i),className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left",children:"Logout"})]})]})}):e.jsx(e.Fragment,{children:e.jsx("button",{onClick:()=>{t("/login")},className:"bg-white cursor-pointer text-blue-500 px-4 py-2 rounded-full hover:bg-yellow-300 hover:text-blue-700 transition duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-yellow-300",children:"Sign In"})})})]}),e.jsxs("div",{className:"md:hidden flex",children:[e.jsx("div",{className:"flex items-center pr-4",children:r?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>a(!n),className:"flex items-center space-x-1 text-white hover:text-yellow-300 transition duration-300 ease-in-out","aria-haspopup":"true","aria-expanded":n,children:[e.jsx(S,{}),e.jsx("span",{children:r.displayName||"Account"}),e.jsx(A,{})]}),n&&e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10",children:[e.jsx(N,{onClick:()=>a(!1),to:"/user",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left ",children:"Profile"}),e.jsx("button",{onClick:()=>R(i),className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left",children:"Logout"})]})]})}):e.jsx(e.Fragment,{children:e.jsx("button",{onClick:()=>{t("/login")},className:"bg-white cursor-pointer text-blue-500 px-4 py-2 rounded-full hover:bg-yellow-300 hover:text-blue-700 transition duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-yellow-300",children:"Sign In"})})}),e.jsx("button",{className:" cursor-pointer text-gray-300 hover:text-white",onClick:()=>s(!l),children:l?e.jsx(F,{size:24}):e.jsx(V,{size:24})})]})]}),l&&e.jsxs("div",{className:"md:hidden pb-3 space-y-2",children:[d.map(o=>e.jsx(b,{to:o.path,onClick:()=>s(!1),className:({isActive:u})=>`block px-3 py-2 rounded-md ${u?"bg-blue-500 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"}`,children:o.name},o.path)),r&&m.map(o=>e.jsx(b,{to:o.path,onClick:()=>s(!1),className:({isActive:u})=>`block px-3 py-2 rounded-md ${u?"bg-blue-500 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"}`,children:o.name},o.path))]})]})})}function le({children:t,className:r=""}){return e.jsx("div",{className:` shadow rounded-2xl ${r}`,children:t})}function ce({children:t,className:r=""}){return e.jsx("div",{className:`border-b p-3 font-semibold ${r}`,children:t})}function de({children:t,className:r=""}){return e.jsx("div",{className:`p-3 ${r}`,children:t})}function ue({children:t,onClick:r,type:i="button",className:l="",variant:s="default",disabled:n}){const a="rounded-lg px-4 py-2 font-medium transition-all",d=s==="outline"?"border border-gray-300 text-gray-700 hover:bg-gray-100":"bg-blue-600 text-white hover:bg-blue-700";return e.jsx("button",{type:i,onClick:r,disabled:n,className:`${a} ${d} ${l}`,children:t})}function xe({value:t,onChange:r,placeholder:i,type:l="text",className:s="",...n}){return e.jsx("input",{type:l,value:t,onChange:r,placeholder:i,className:`w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 outline-none ${s}`,...n})}function me(){const t=_.currentUser,[r,i]=c.useState([]),[l,s]=c.useState("");c.useEffect(()=>{const a=W(v(p,"messages"),X("createdAt","asc"));return Y(a,m=>{i(m.docs.map(o=>({id:o.id,...o.data()})))})},[]);const n=async a=>{a.preventDefault(),l.trim()&&(await w(v(p,"messages"),{text:l,uid:t.uid,photoURL:t.photoURL,displayName:t.displayName,createdAt:g()}),s(""))};return e.jsxs(le,{className:"p-4 h-full flex flex-col",children:[e.jsx(ce,{className:"font-semibold text-lg",children:"Chat Room"}),e.jsx(de,{className:"flex-1 overflow-y-auto space-y-2",children:r.map(a=>e.jsx("div",{className:`flex ${a.uid===t.uid?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`p-2 rounded-lg ${a.uid===t.uid?"bg-blue-500 text-white":"bg-gray-200"}`,children:[a.uid!==t.uid&&e.jsx("p",{className:"text-sm bold",children:a.displayName}),e.jsx("p",{className:"text-sm",children:a.text})]})},a.id))}),e.jsxs("form",{onSubmit:n,className:"flex gap-2 mt-2",children:[e.jsx(xe,{value:l,onChange:a=>s(a.target.value),placeholder:"Type message..."}),e.jsx(ue,{type:"submit",children:"Send"})]})]})}const he=c.lazy(()=>f(()=>import("./Home-HxPtw7fy.js").then(t=>t.a),__vite__mapDeps([0,1,2,3]))),pe=c.lazy(()=>f(()=>import("./About-BhKB8ggo.js"),__vite__mapDeps([4,1,2]))),fe=c.lazy(()=>f(()=>import("./index-DM8LFY-t.js"),__vite__mapDeps([5,1,2,3,4,0])).then(t=>({default:t.Login}))),ge=c.lazy(()=>f(()=>import("./index-DM8LFY-t.js"),__vite__mapDeps([5,1,2,3,4,0])).then(t=>({default:t.Register}))),ye=c.lazy(()=>f(()=>import("./Home-HxPtw7fy.js").then(t=>t.a),__vite__mapDeps([0,1,2,3]))),je=c.lazy(()=>f(()=>import("./Profile-rV3KCjUJ.js"),__vite__mapDeps([6,1,2,3]))),be=c.lazy(()=>f(()=>import("./List-BweeBh-R.js"),__vite__mapDeps([7,1,2,3]))),ve=c.lazy(()=>f(()=>import("./Items-EC5_XMgO.js"),__vite__mapDeps([8,1,2,3])));function Ne(){const[t,r]=c.useState(null),[i,l]=c.useState(!0),[s,n]=c.useState();return c.useEffect(()=>{const a=Z(_,async m=>{console.log("Auth status changed"),m?await ne(m,r):r(),l(!1)}),d=re(n);return()=>{a(),d()}},[]),i||!s?e.jsx("div",{className:"h-screen bg-gray-900 text-gray-100 flex items-center justify-center",children:"Loading..."}):e.jsx(c.Suspense,{fallback:e.jsx("div",{className:"h-screen bg-gray-900 text-gray-100 flex items-center justify-center",children:"Loading..."}),children:e.jsx(z.Provider,{value:{db:p,auth:_,user:t,items:s,setUser:r},children:e.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-100 flex flex-col",children:[e.jsx(ie,{}),e.jsx("main",{className:"flex-grow container mx-auto p-6",children:e.jsxs(M,{children:[e.jsxs(x,{path:"/",children:[e.jsx(x,{index:!0,element:e.jsx(he,{items:s})}),e.jsx(x,{path:"about",element:e.jsx(pe,{})}),e.jsx(x,{path:"login",element:t?e.jsx(j,{to:"/"}):e.jsx(fe,{})}),e.jsx(x,{path:"register",element:t?e.jsx(j,{to:"/"}):e.jsx(ge,{})}),e.jsx(x,{path:"chat",element:t?e.jsx(me,{}):e.jsx(j,{to:"/"})}),e.jsx(x,{path:":id",element:e.jsx(ye,{items:s})})]}),e.jsxs(x,{path:"/user",element:t?e.jsx(C,{}):e.jsx(j,{to:"/"}),children:[e.jsx(x,{index:!0,element:e.jsx(je,{})}),e.jsx(x,{path:"list",element:e.jsx(be,{items:s})})]}),e.jsx(x,{path:"/info",element:t?e.jsx(C,{}):e.jsx(j,{to:"/"}),children:e.jsx(x,{index:!0,element:e.jsx(ve,{})})})]})}),e.jsx(oe,{})]})})})}class we extends P.Component{constructor(r){super(r),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,i){console.error("Error caught by ErrorBoundary:",r,i),this.setState({errorInfo:i})}handleReload=()=>{window.location.reload()};render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 text-gray-800 p-6",children:e.jsxs("div",{className:"max-w-md w-full text-center bg-white rounded-2xl shadow-lg p-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"An unexpected error occurred. Try refreshing the page or come back later."}),!1,e.jsx("button",{onClick:this.handleReload,className:"mt-2 px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition",children:"Reload Page"})]})}):this.props.children}}B.createRoot(document.getElementById("root")).render(e.jsx(P.StrictMode,{children:e.jsx(we,{children:e.jsx(q,{basename:"/torn-trade/",children:e.jsx(Ne,{})})})}));export{ue as B,le as C,xe as I,_ as a,p as d,ne as i,se as u,k as w};
